{"title":"Spring-Secutity-Oauth2å®ç°Auth Server(æ—§ç‰ˆ)","uid":"40ea842bde81b9af210ab16629bae6dd","slug":"Spring-Secutity-Oauth2-Demo","date":"2022-04-23T13:35:50.000Z","updated":"2022-06-02T08:46:03.035Z","comments":true,"path":"api/articles/Spring-Secutity-Oauth2-Demo.json","keywords":null,"cover":"https://raw.githubusercontent.com/ITLab1024/picgo-images/main/202204232139177.png","content":"<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><h1 id=\"å‰è¨€\"><a href=\"#å‰è¨€\" class=\"headerlink\" title=\"å‰è¨€\"></a>å‰è¨€</h1></blockquote>\n<pre><code>Oauth2æˆæƒæ˜¯é¡¹ç›®ä¸­ä½¿ç”¨å¾ˆå¤šçš„åè®®ï¼Œåœ¨ä¸‰æ–¹æˆæƒä¸­æœ‰è¿™å¾ˆå¤§çš„åº”ç”¨ã€‚\n\nspring å®˜æ–¹å®£å¸ƒåœ¨spring-security5ä»¥ååˆ é™¤æ‰Authorization Serverç›¸å…³åŠŸèƒ½ï¼Œå®˜æ–¹æ¨èä½¿ç”¨ç¬¬ä¸‰æ–¹oauth2æœåŠ¡å™¨ï¼Œä¾‹å¦‚keycloakã€‚ä½œä¸ºspringçš„å¿ å®èˆ”ç‹—ï¼Œæˆ‘è·Ÿå¾ˆå¤šå¼€å‘è€…ä¸€æ ·å¯¹springçš„è¿™ä¸ªå®£å¸ƒä¸èƒ½è®¤åŒï¼Œspring è¿«äºå¯¹å¹¿å¤§å¼€å‘è€…å¼ºçƒˆä¸æ»¡å’Œè¿«åˆ‡éœ€æ±‚ï¼Œè§‰å¾—å¦å¼€ä¸€ä¸ªé¡¹ç›®ï¼ˆSpring Authorization Serverï¼‰. æ—¶é—´è¿‡å»å¾ˆä¹…äº†ã€‚ç¤¾åŒºä¸€ç›´åœ¨å¼€å‘ä¸­ã€‚\n\nåœ¨å¼€å‘è¿‡ç¨‹ä¸­ç¤¾åŒºå°†jaråŒ…ä¸Šä¼ åˆ°maven centralï¼Œä¾‹å¦‚0.1.0-0.1.2ç‰ˆæœ¬ï¼Œä½†æ˜¯éƒ½æœªæ˜æ–‡è¯´æ˜å¯ä»¥ä½¿ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒã€‚\n\nè¿‘æœŸspring å®˜æ–¹å‘å¸ƒäº†å‡ ä¸ªé€šçŸ¥ï¼š\n</code></pre>\n<ul>\n<li><p>2021å¹´8æœˆ17æ—¥ï¼Œé€šçŸ¥ï¼šSpring Authorization Serverè¿ç§»åˆ°spring projects</p>\n<p>  <img src=\"https://raw.githubusercontent.com/xpp1109/images/main/uPic/image-20210825093410598.png\" alt=\"image-20210825093410598\"></p>\n</li>\n<li><p>2021å¹´8æœˆ19æ—¥ï¼Œé€šçŸ¥Spring Authorization Server ç”Ÿäº§ç¯å¢ƒå¯ç”¨ã€‚ï¼ˆå…¶å®è¿™å‡ å¤©å®˜æ–¹çš„é€šçŸ¥æœ‰å˜åŒ–ï¼Œæ¯”å¦‚å…ˆå‘çš„æ–‡æ¡£ï¼Œä¸Šé¢æœªå†™maven centralä¸Šçš„jaråœ°å€ã€‚ä¹Ÿå¯ä»¥ç†è§£ï¼Œäº‹æƒ…è¦ä¸€æ­¥ä¸€æ­¥åšçš„å˜›ğŸ˜ï¼‰</p>\n<p><img src=\"https://raw.githubusercontent.com/xpp1109/images/main/uPic/image-20210825093554682.png\" alt=\"image-20210825093554682\"></p>\n<p>çœ‹åˆ°è¯¥é€šçŸ¥åï¼Œæƒ³å°è¯•ä¸‹ã€‚äºæ˜¯è¿›å…¥ä»“åº“åœ°å€ï¼ˆ<a href=\"https://github.com/spring-projects/spring-authorization-server%EF%BC%89%EF%BC%8C%E6%9C%AA%E5%8F%91%E7%8E%B0%E6%9C%89%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3%EF%BC%8C%E5%8F%AA%E6%9C%89%E6%BA%90%E7%A0%81%E5%92%8C%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B%E3%80%82\">https://github.com/spring-projects/spring-authorization-serverï¼‰ï¼Œæœªå‘ç°æœ‰ä½¿ç”¨æ–‡æ¡£ï¼Œåªæœ‰æºç å’Œä½¿ç”¨ç¤ºä¾‹ã€‚</a></p>\n<pre><code>å› æ­¤æœ‰äº›æŠµè§¦ï¼Œæ²¡æœ‰æ–‡æ¡£ä½¿ç”¨éš¾åº¦è¾ƒå¤§ï¼Œæ— æ³•æ·±å…¥ç†è§£å¼€å‘è€…æ€æƒ³ã€‚æ‰€ä»¥æƒ³å†ç­‰ç­‰ã€‚\n\næ­¤æ—¶æƒ³èµ·ä»¥å‰çš„oauth2å®ç°æ–¹æ¡ˆï¼Œæƒ³åšä¸ªå¤ä¹ ï¼Œæ‰€ä»¥æƒ³å†™ä¸ªdemoã€‚è®°å½•ä¸‹æ¥ã€‚ä¹Ÿç»™å…¶ä»–å­¦è€…ä¸€ä¸ªå‚è€ƒã€‚å› æ­¤å†™ä¸‹æ­¤demoã€‚\n</code></pre>\n<p><em>ä¹‹åæˆ‘ä¼šä½¿ç”¨Spring Authorization Server</em> ä¾èµ–ï¼Œå†æ¬¡å®ç°è·Ÿæœ¬demoä¸€æ ·çš„ä¾‹å­ï¼Œæ•¬è¯·å…³æ³¨ã€‚</p>\n</li>\n</ul>\n<blockquote>\n<h1 id=\"ä»€ä¹ˆæ˜¯Oauth2-0\"><a href=\"#ä»€ä¹ˆæ˜¯Oauth2-0\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯Oauth2.0\"></a>ä»€ä¹ˆæ˜¯Oauth2.0</h1></blockquote>\n<pre><code>æœ¬æ–‡ä¸ä½œèµ˜è¿°ï¼Œç½‘ä¸Šæ–‡ç« è¾ƒå¤šã€‚æ¨èå‡ ä¸ªï¼Œhttps://www.ruanyifeng.com/blog/2019/04/oauth-grant-types.htmlï¼Œ https://oauth.net/2/ ã€‚https://zhuanlan.zhihu.com/p/84670338ã€‚\n</code></pre>\n<blockquote>\n<h1 id=\"ä½¿ç”¨Spring-Securityå’ŒSpring-Security-Oauth2ä¾èµ–å®ç°\"><a href=\"#ä½¿ç”¨Spring-Securityå’ŒSpring-Security-Oauth2ä¾èµ–å®ç°\" class=\"headerlink\" title=\"ä½¿ç”¨Spring Securityå’ŒSpring Security Oauth2ä¾èµ–å®ç°\"></a>ä½¿ç”¨Spring Securityå’ŒSpring Security Oauth2ä¾èµ–å®ç°</h1></blockquote>\n<ul>\n<li><p>è¯´æ˜</p>\n<p>spring Bootï¼š 2.3.4.RELEASE</p>\n<p>spring-Security-oauth2ï¼š2.5.1.RELEASE</p>\n<p>jdk: 1.8</p>\n<p>å¼€å‘å·¥å…·: IDEA</p>\n<p>åŒ…ç®¡ç†å·¥å…·ï¼šMAVEN</p>\n</li>\n<li><p>é¡¹ç›®ç»“æ„</p>\n<pre class=\"line-numbers language-text\" data-language=\"text\"><code class=\"language-text\">authorization-server \t\t\t\t\t\t&#x2F;&#x2F;æˆæƒæœåŠ¡å™¨moduleæ ¹ç›®å½•\nâ”œâ”€â”€ README.md\t\t\t\t\t\t\t\t\t\t&#x2F;&#x2F; è¯´æ˜æ–‡æ¡£\t\t\t\t\nâ”œâ”€â”€ authorization-server.iml\t\t&#x2F;&#x2F; ideaç³»ç»Ÿæ–‡ä»¶ï¼ˆå¿½ç•¥ï¼‰\nâ”œâ”€â”€ pom.xml\t\t\t\t\t\t\t\t\t\t\t&#x2F;&#x2F; mavenä¾èµ–ï¼ˆæ³¨æ„çˆ¶çº§ä¾èµ–ï¼‰\nâ””â”€â”€ src\t\t\t\t\t\t\t\t\t\t\t\t\t&#x2F;&#x2F; æºç è·¯å¾„\n    â”œâ”€â”€ main\n    â”‚   â”œâ”€â”€ java\n    â”‚   â”‚   â””â”€â”€ com\n    â”‚   â”‚       â””â”€â”€ xpp\n    â”‚   â”‚           â””â”€â”€ sslt5\n    â”‚   â”‚               â””â”€â”€ as\n    â”‚   â”‚                   â”œâ”€â”€ AuthorizationServerApplication.java &#x2F;&#x2F; å¯åŠ¨ç±»\n    â”‚   â”‚                   â”œâ”€â”€ config\n    â”‚   â”‚                   â”‚   â”œâ”€â”€ AuthorizationServerConfig.java  &#x2F;&#x2F; æˆæƒæœåŠ¡å™¨é…ç½®ç±»\n    â”‚   â”‚                   â”‚   â””â”€â”€ SecurityConfig.java\t\t\t\t\t\t\t&#x2F;&#x2F;securityå®‰å…¨é…ç½®\n    â”‚   â”‚                   â”œâ”€â”€ entity\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    â”‚   â”‚                   â”‚   â””â”€â”€ Account.java\t\t\t\t\t\t\t\t\t\t\t\t&#x2F;&#x2F;ç”¨æˆ·å®ä½“ç±»\t\t\t\t\t\t\t\n    â”‚   â”‚                   â”œâ”€â”€ repository\n    â”‚   â”‚                   â”‚   â””â”€â”€ UserRepository.java\t\t\t\t\t\t\t&#x2F;&#x2F; è´¦æˆ·Dao\n    â”‚   â”‚                   â””â”€â”€ svc\n    â”‚   â”‚                       â””â”€â”€ UserDetailSvc.java\t\t\t\t\t\t\t&#x2F;&#x2F; security user Detailsç±»\n    â”‚   â””â”€â”€ resources\t\t\t\t\t\t\t\t\t\t\t\t&#x2F;&#x2F; æºæ–‡ä»¶ç›®å½•\n    â”‚       â”œâ”€â”€ application.yml\t\t\t\t\t\t\t&#x2F;&#x2F; spring boot é…ç½®æ–‡ä»¶\n    â”‚       â”œâ”€â”€ oauth2-data.sql\t\t\t\t&#x2F;&#x2F; åˆå§‹åŒ–oauth2æ•°æ®sql\n    â”‚       â”œâ”€â”€ import.sql\t\t\t\t\t\t\t\t\t&#x2F;&#x2F; jpaåˆå§‹åŒ–Accountè¡¨è¯­å¥\n    â”‚       â””â”€â”€ oauth2-schema.sql\t\t\t&#x2F;&#x2F; åˆå§‹åŒ–åˆ›å»ºoauth2ç›¸å…³è¡¨è¯­å¥\n    â””â”€â”€ test\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&#x2F;&#x2F; æµ‹è¯•æºç è·¯å¾„\n        â””â”€â”€ java</code></pre>\n</li>\n<li><p>Mavenä¾èµ–ï¼š</p>\n<pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;\n&lt;project xmlns&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;POM&#x2F;4.0.0&quot;\n         xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;\n         xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;POM&#x2F;4.0.0 http:&#x2F;&#x2F;maven.apache.org&#x2F;xsd&#x2F;maven-4.0.0.xsd&quot;&gt;\n    &lt;parent&gt;\n        &lt;artifactId&gt;spring-security-lt5-oauth2&lt;&#x2F;artifactId&gt;\n        &lt;groupId&gt;com.xpp&lt;&#x2F;groupId&gt;\n        &lt;version&gt;0.0.1&lt;&#x2F;version&gt;\n    &lt;&#x2F;parent&gt;\n    &lt;modelVersion&gt;4.0.0&lt;&#x2F;modelVersion&gt;\n\n    &lt;artifactId&gt;authorization-server&lt;&#x2F;artifactId&gt;\n    &lt;version&gt;0.0.1&lt;&#x2F;version&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;8&lt;&#x2F;maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;8&lt;&#x2F;maven.compiler.target&gt;\n    &lt;&#x2F;properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;&#x2F;artifactId&gt;\n        &lt;&#x2F;dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;&#x2F;artifactId&gt;\n        &lt;&#x2F;dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;&#x2F;artifactId&gt;\n        &lt;&#x2F;dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;&#x2F;groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;&#x2F;artifactId&gt;\n            &lt;scope&gt;test&lt;&#x2F;scope&gt;\n        &lt;&#x2F;dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security.oauth&lt;&#x2F;groupId&gt;\n            &lt;artifactId&gt;spring-security-oauth2&lt;&#x2F;artifactId&gt;\n            &lt;version&gt;2.5.1.RELEASE&lt;&#x2F;version&gt;\n        &lt;&#x2F;dependency&gt;\n        &lt;dependency&gt;\n          &lt;groupId&gt;com.h2database&lt;&#x2F;groupId&gt;\n          &lt;artifactId&gt;h2&lt;&#x2F;artifactId&gt;\n          &lt;scope&gt;runtime&lt;&#x2F;scope&gt;\n        &lt;&#x2F;dependency&gt;\n    &lt;&#x2F;dependencies&gt;\n&lt;&#x2F;project&gt;</code></pre>\n</li>\n<li><p>Security configç±»</p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">package com.xpp.sslt5.as.config;\n\nimport com.xpp.sslt5.as.svc.UserDetailSvc;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\n\n@Configuration\npublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123;\n    @Bean\n    public PasswordEncoder passwordEncoder() &#123;\n        return new BCryptPasswordEncoder();\n    &#125;\n\n    @Autowired\n    private UserDetailSvc userDetailSvc;\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception &#123;\n        auth.userDetailsService(userDetailSvc).passwordEncoder(passwordEncoder());\n    &#125;\n\n\n    &#x2F;&#x2F; AuthenticationManager å¯¹è±¡åœ¨ OAuth2 è®¤è¯æœåŠ¡ä¸­è¦ä½¿ç”¨ï¼Œæå‰æ”¾å…¥ IOC å®¹å™¨ä¸­\n   \t&#x2F;&#x2F; å¿…é¡»ä½¿ç”¨@Beanæ³¨å…¥IOCå®¹å™¨ä¸­ï¼Œå¦åˆ™password grant_typeæ— æ•ˆã€‚\n    @Override\n    @Bean\n    public AuthenticationManager authenticationManagerBean() throws Exception &#123;\n        return super.authenticationManagerBean();\n    &#125;\n&#125;\n</code></pre>\n\n\n</li>\n<li><p>Authorization Server Config é…ç½®ç±»</p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">package com.xpp.sslt5.as.config;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.oauth2.config.annotation.configurers.ClientDetailsServiceConfigurer;\nimport org.springframework.security.oauth2.config.annotation.web.configuration.AuthorizationServerConfigurerAdapter;\nimport org.springframework.security.oauth2.config.annotation.web.configuration.EnableAuthorizationServer;\nimport org.springframework.security.oauth2.config.annotation.web.configurers.AuthorizationServerEndpointsConfigurer;\nimport org.springframework.security.oauth2.config.annotation.web.configurers.AuthorizationServerSecurityConfigurer;\nimport org.springframework.security.oauth2.provider.ClientDetailsService;\nimport org.springframework.security.oauth2.provider.approval.ApprovalStore;\nimport org.springframework.security.oauth2.provider.approval.JdbcApprovalStore;\nimport org.springframework.security.oauth2.provider.client.JdbcClientDetailsService;\nimport org.springframework.security.oauth2.provider.code.AuthorizationCodeServices;\nimport org.springframework.security.oauth2.provider.code.JdbcAuthorizationCodeServices;\nimport org.springframework.security.oauth2.provider.token.AuthorizationServerTokenServices;\nimport org.springframework.security.oauth2.provider.token.DefaultTokenServices;\nimport org.springframework.security.oauth2.provider.token.TokenStore;\nimport org.springframework.security.oauth2.provider.token.store.JdbcTokenStore;\n\nimport javax.sql.DataSource;\n\n@Configuration\n@EnableAuthorizationServer\npublic class AuthorizationServerConfig extends AuthorizationServerConfigurerAdapter &#123;\n    &#x2F;&#x2F; æ•°æ®åº“è¿æ¥æ± å¯¹è±¡ï¼ŒSpringBoot é…ç½®å®Œæˆåè‡ªåŠ¨æ³¨å…¥\n    @Autowired\n    private DataSource dataSource;\n\n    &#x2F;&#x2F; æˆæƒæ¨¡å¼ä¸“ç”¨å¯¹è±¡ï¼Œåœ¨ Security é…ç½®ä¸­æ³¨å…¥å®¹å™¨\n    @Autowired\n    private AuthenticationManager authenticationManager;\n\n    &#x2F;&#x2F; å®¢æˆ·ç«¯ä¿¡æ¯æ¥æº\n    @Bean\n    public ClientDetailsService jdbcClientDetailsService() &#123;\n        return new JdbcClientDetailsService(dataSource);\n    &#125;\n\n    &#x2F;&#x2F; token ä¿å­˜ç­–ç•¥ï¼ŒæŒ‡ä½ ç”Ÿæˆçš„ Token è¦å¾€å“ªé‡Œå­˜å‚¨\n    &#x2F;&#x2F;JdbcTokenStore ï¼Œ InMemoryTokenStoreï¼Œ JwkTokenStoreï¼ŒJwtTokenStore, RedisTokenStore\n    @Bean\n    public TokenStore tokenStore() &#123;\n        return new JdbcTokenStore(dataSource);\n    &#125;\n\n    &#x2F;&#x2F; æŒ‡å®šå®¢æˆ·ç«¯ä¿¡æ¯çš„æ•°æ®åº“æ¥æº\n    @Override\n    public void configure(ClientDetailsServiceConfigurer clients) throws Exception &#123;\n        clients.withClientDetails(jdbcClientDetailsService());\n    &#125;\n\n\n    &#x2F;&#x2F; æˆæƒä¿¡æ¯ä¿å­˜ç­–ç•¥\n    @Bean\n    public ApprovalStore approvalStore() &#123;\n        return new JdbcApprovalStore(dataSource);\n    &#125;\n\n    &#x2F;&#x2F; æˆæƒç æ¨¡å¼æ•°æ®æ¥æº\n    @Bean\n    public AuthorizationCodeServices authorizationCodeServices() &#123;\n        return new JdbcAuthorizationCodeServices(dataSource);\n    &#125;\n\n\n    &#x2F;&#x2F; ä»¤ç‰Œç®¡ç†\n    @Bean\n    public AuthorizationServerTokenServices tokenServices() &#123;\n        DefaultTokenServices tokenServices &#x3D; new DefaultTokenServices();\n        &#x2F;&#x2F; token ä¿å­˜ç­–ç•¥\n        tokenServices.setTokenStore(tokenStore());\n        &#x2F;&#x2F; æ”¯æŒåˆ·æ–°æ¨¡å¼\n        tokenServices.setSupportRefreshToken(true);\n        &#x2F;&#x2F; å®¢æˆ·ç«¯ä¿¡æ¯æ¥æº\n        tokenServices.setClientDetailsService(jdbcClientDetailsService());\n        &#x2F;&#x2F; token æœ‰æ•ˆæœŸè‡ªå®šä¹‰è®¾ç½®ï¼Œé»˜è®¤ 12 å°æ—¶\n        tokenServices.setAccessTokenValiditySeconds(60 * 60 * 12);\n        &#x2F;&#x2F; refresh token æœ‰æ•ˆæœŸè‡ªå®šä¹‰è®¾ç½®ï¼Œé»˜è®¤ 30 å¤©\n        tokenServices.setRefreshTokenValiditySeconds(60 * 60 * 24 * 7);\n\n        return tokenServices;\n    &#125;\n\n    &#x2F;&#x2F; æ£€æŸ¥ token çš„ç­–ç•¥ï¼Œå³é…ç½®ä»¤ç‰Œç«¯ç‚¹çš„å®‰å…¨çº¦æŸ\n    &#x2F;&#x2F; å°±æ˜¯è¿™ä¸ªç«¯ç‚¹è°èƒ½è®¿é—®ï¼Œè°ä¸èƒ½è®¿é—®\n    @Override\n    public void configure(AuthorizationServerSecurityConfigurer security) &#123;\n        &#x2F;&#x2F; æ­¤æ—¶æŒ‡ endpoint å®Œå…¨å…¬å¼€\n        security.tokenKeyAccess(&quot;permitAll()&quot;);\n        &#x2F;&#x2F; checkToken è¿™ä¸ª endpoint å®Œå…¨å…¬å¼€\n        security.checkTokenAccess(&quot;permitAll()&quot;);\n        &#x2F;&#x2F; æ˜¯å¦å…è®¸è¡¨å•è®¤è¯\n        security.allowFormAuthenticationForClients();\n\n    &#125;\n\n    &#x2F;&#x2F; OAuth2 çš„ä¸»é…ç½®ä¿¡æ¯\n    @Override\n    public void configure(AuthorizationServerEndpointsConfigurer endpoints) &#123;\n        endpoints\n                .approvalStore(approvalStore())\n                .authenticationManager(authenticationManager)\n                .authorizationCodeServices(authorizationCodeServices())\n                .tokenServices(tokenServices());\n    &#125;\n&#125;\n</code></pre>\n</li>\n<li><p>UserDetailSvcç±»</p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">package com.xpp.sslt5.as.svc;\n\nimport com.xpp.sslt5.as.entity.Account;\nimport com.xpp.sslt5.as.repository.AccountRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.User;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.stereotype.Component;\n\nimport java.util.*;\nimport java.util.stream.Collectors;\n\n@Component\npublic class UserDetailSvc implements UserDetailsService &#123;\n    @Autowired\n    private AccountRepository userRepository;\n    @Override\n    public UserDetails loadUserByUsername(String s) throws UsernameNotFoundException &#123;\n        List&lt;GrantedAuthority&gt; grantedAuths &#x3D; new ArrayList&lt;&gt;();\n        Account account &#x3D; userRepository.findByUsername(s);\n        if (Objects.isNull(account)) &#123;\n            throw new UsernameNotFoundException(&quot;No user found with username: &quot; + s);\n        &#125;\n        Arrays.stream(account.getRoleIdentifies().split(&quot;,&quot;)).collect(Collectors.toSet())\n                .forEach(x-&gt; grantedAuths.add(new SimpleGrantedAuthority(x)));\n        return new User(account.getUsername(), account.getPassword(), grantedAuths);\n    &#125;\n\n    public static void main(String[] args) &#123;\n        System.out.println(new BCryptPasswordEncoder().encode(&quot;xpp&quot;));\n    &#125;\n&#125;</code></pre>\n</li>\n<li><p>ä»¥ä¸Šåªæ˜¯ç®€å•çš„ç´¯å‡ºæ¥é‡è¦æ–‡ä»¶ï¼Œå…¶ä»–é…ç½®æ–‡ä»¶è¯·è‡ªè¡Œå»githubä¸ŠæŸ¥çœ‹ã€‚</p>\n</li>\n</ul>\n<blockquote>\n<p>æµ‹è¯•ï¼ˆé‡ç‚¹ï¼‰</p></blockquote>\n<ul>\n<li><p>æˆæƒç æ¨¡å¼</p>\n<p>å¯åŠ¨é¡¹ç›®åï¼Œæ‰“å¼€æµè§ˆå™¨è¾“å…¥ï¼š</p>\n<p><a href=\"http://localhost:8080/oauth/authorize?response_type=code&amp;client_id=xpp\">http://localhost:8080/oauth/authorize?response_type=code&amp;client_id=xpp</a></p>\n<p>å‡ºç°å¦‚ä¸‹ç•Œé¢ï¼š</p>\n<p><img src=\"https://raw.githubusercontent.com/xpp1109/images/main/uPic/image-20210825111418616.png\" alt=\"image-20210825111418616\"></p>\n<p>å‡ºç°ä¸Šè¿°ç•Œé¢åï¼Œè¾“å…¥ç”¨æˆ·åå¯†ç (a1,a2,a3çš†å¯ï¼Œå¯†ç éƒ½æ˜¯xpp):</p>\n<p><img src=\"https://raw.githubusercontent.com/xpp1109/images/main/uPic/image-20210825111730313.png\" alt=\"image-20210825111730313\"></p>\n<p>æŒ‰ç…§ä¸Šå›¾ç‚¹å‡»ï¼ŒAuthorizeæŒ‰é’®ã€‚</p>\n<p>å› ä¸ºæˆ‘é…ç½®çš„redirect_uriæ˜¯ç™¾åº¦ï¼Œå¦‚å›¾ï¼š</p>\n<p><img src=\"https://raw.githubusercontent.com/xpp1109/images/main/uPic/image-20210825111830201.png\" alt=\"image-20210825111830201\"></p>\n<p>æˆ‘ä»¬çœ‹åˆ°ç™¾åº¦åé¢è·Ÿäº†ä¸ªcodeï¼Œå¤åˆ¶è¿™ä¸ªcodeå€¼ï¼Œæ‰“å¼€postmanè·å–tokenï¼š</p>\n<p>æ³¨æ„clientå’Œsecretçš„æˆæƒ</p>\n<p><img src=\"https://raw.githubusercontent.com/xpp1109/images/main/uPic/image-20210825112006352.png\" alt=\"image-20210825112006352\"></p>\n<p>ä¼ é€’å‚æ•°ç•Œé¢ï¼š</p>\n<p><img src=\"https://raw.githubusercontent.com/xpp1109/images/main/uPic/image-20210825112026225.png\" alt=\"image-20210825112026225\"></p>\n<p>å‘é€è¯·æ±‚è¿”å›çš„ç•Œé¢ï¼š</p>\n<p><img src=\"https://raw.githubusercontent.com/xpp1109/images/main/uPic/image-20210825112051619.png\" alt=\"image-20210825112051619\"></p>\n<p>æµ‹è¯•åˆ·æ–°tokenï¼š</p>\n<p><img src=\"https://raw.githubusercontent.com/xpp1109/images/main/uPic/image-20210825112142968.png\" alt=\"image-20210825112142968\"></p>\n<p>æˆ‘ä»¬çœ‹åˆ°access_tokenè·Ÿä¹‹å‰è·å–çš„å˜åŒ–äº†ï¼Œrefresh_tokenæœªå˜åŒ–ã€‚</p>\n</li>\n<li><p>ç®€åŒ–æ¨¡å¼</p>\n<p>è®¿é—®ç®€åŒ–æ¨¡å¼åœ°å€ï¼š<a href=\"http://localhost:8080/oauth/authorize?response_type=token&amp;client_id=xpp\">http://localhost:8080/oauth/authorize?response_type=token&amp;client_id=xpp</a></p>\n<p>è¾“å…¥ç”¨æˆ·åå¯†ç ï¼ˆåŒä¸€ä¸ªclientä¸‹çš„ç”¨æˆ·å¦‚æœæˆæƒè¿‡ä¸ä¼šå‡ºç°ç™»å½•ç•Œé¢ï¼‰ï¼Œè¾“å…¥å¯†ç ç™»å½•å, ç‚¹å‡»æˆæƒå’ŒauthorizeæŒ‰é’®ï¼Œæµè§ˆå™¨è‡ªåŠ¨è·³è½¬åˆ°ç™¾åº¦ï¼Œåœ°å€æ¥ä¸ºï¼š<a href=\"https://www.baidu.com/#access_token=Pfa4YiIoN3Z1C2e1q-GV_E023C4&amp;token_type=bearer&amp;expires_in=43199&amp;scope=read\">https://www.baidu.com/#access_token=Pfa4YiIoN3Z1C2e1q-GV_E023C4&amp;token_type=bearer&amp;expires_in=43199&amp;scope=read</a></p>\n<p>æˆ‘ä»¬çœ‹åˆ°çœå»äº†è¯·æ±‚oauth&#x2F;tokenï¼Œç›´æ¥åœ¨å›è°ƒåœ°å€ä¸­çœ‹åˆ°äº†access_token. è¿™å°±æ˜¯ç®€åŒ–æ¨¡å¼ã€‚</p>\n</li>\n<li><p>å¯†ç æ¨¡å¼</p>\n<p><img src=\"https://raw.githubusercontent.com/xpp1109/images/main/uPic/image-20210825113042089.png\" alt=\"image-20210825113042089\"></p>\n<p><img src=\"https://raw.githubusercontent.com/xpp1109/images/main/uPic/image-20210825113115417.png\" alt=\"image-20210825113115417\"></p>\n<p>åˆ·æ–°tokenæ­¤å¤„ä¸å†ä¸¾ä¾‹æµ‹è¯•ã€‚</p>\n</li>\n<li><p>å®¢æˆ·ç«¯æ¨¡å¼</p>\n<p><img src=\"https://raw.githubusercontent.com/xpp1109/images/main/uPic/image-20210825113042089.png\" alt=\"image-20210825113042089\"></p>\n<p><img src=\"https://raw.githubusercontent.com/xpp1109/images/main/uPic/image-20210825113231013.png\" alt=\"image-20210825113231013\"></p>\n</li>\n</ul>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>ä»¥ä¸Šå°±è®²oauth2çš„åŠŸèƒ½åŸºæœ¬å®Œæˆï¼Œå¯¹äºinmemoryå’Œredisçš„æ–¹å¼æ²¡æœ‰ä¸¾ä¾‹ã€‚</p>\n<p>è¿™é‡Œè¿˜æœ‰ä¸¤ä¸ªé—®é¢˜ï¼Œç¬¬ä¸€ä¸ªï¼šè·å–çš„tokenå¦‚ä½•ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯authorization clientå’Œ resource serverï¼ŒåæœŸæ…¢æ…¢è¡¥å……ã€‚</p>\n<p>ç¬¬äºŒä¸ªï¼šç™»å½•ç”¨æˆ·å’Œclientç»´æŠ¤åº”è¯¥é€šè¿‡æ¥å£æä¾›åˆ›å»ºæ›´æ–°ç­‰æ–¹ä½æ–¹å¼ã€‚åæœŸæ…¢æ…¢è¡¥å……ã€‚</p></blockquote>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>æœ¬æ–‡ä½¿ç”¨çš„äº‹spring-security-oauth2å®ç°ï¼Œåœ¨spring security 5ä»¥åå·²ç»å¼ƒç”¨ï¼Œåç»­ä¼šå•ç‹¬ä½¿ç”¨securityå®ç°ã€‚æ•¬è¯·æœŸå¾…ï¼ŒæœŸå¾…æ‚¨çš„å…³æ³¨ã€‚æœŸå¾…æ‚¨çš„æ„è§ã€‚</p></blockquote>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>æºç åœ°å€ï¼š<a href=\"https://github.com/ITLab1024/spring-security-lt5-oauth2\">https://github.com/ITLab1024/spring-security-lt5-oauth2</a></p></blockquote>\n","feature":false,"text":" å‰è¨€ Oauth2æˆæƒæ˜¯é¡¹ç›®ä¸­ä½¿ç”¨å¾ˆå¤šçš„åè®®ï¼Œåœ¨ä¸‰æ–¹æˆæƒä¸­æœ‰è¿™å¾ˆå¤§çš„åº”ç”¨ã€‚ spring å®˜æ–¹å®£å¸ƒåœ¨spring-security5ä»¥ååˆ é™¤æ‰Authorization Serverç›¸å…³åŠŸèƒ½ï¼Œå®˜æ–¹æ¨èä½¿ç”¨ç¬¬ä¸‰æ–¹oauth2æœåŠ¡å™¨ï¼Œä¾‹å¦‚keycloakã€‚ä½œä¸ºspringçš„å¿ å®èˆ”ç‹—...","link":"","photos":[],"count_time":{"symbolsCount":"14k","symbolsTime":"13 mins."},"categories":[{"name":"Java","slug":"Java","count":2,"path":"api/categories/Java.json"},{"name":"Spring Security","slug":"Java/Spring-Security","count":2,"path":"api/categories/Java/Spring-Security.json"},{"name":"Spring-Secutiry-Oauth2","slug":"Java/Spring-Security/Spring-Secutiry-Oauth2","count":1,"path":"api/categories/Java/Spring-Security/Spring-Secutiry-Oauth2.json"}],"tags":[{"name":"Spring Security Oauth2","slug":"Spring-Security-Oauth2","count":1,"path":"api/tags/Spring-Security-Oauth2.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%89%8D%E8%A8%80\"><span class=\"toc-text\">å‰è¨€</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%BB%80%E4%B9%88%E6%98%AFOauth2-0\"><span class=\"toc-text\">ä»€ä¹ˆæ˜¯Oauth2.0</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8Spring-Security%E5%92%8CSpring-Security-Oauth2%E4%BE%9D%E8%B5%96%E5%AE%9E%E7%8E%B0\"><span class=\"toc-text\">ä½¿ç”¨Spring Securityå’ŒSpring Security Oauth2ä¾èµ–å®ç°</span></a></li></ol>","author":{"name":"ITLab","slug":"blog-author","avatar":"https://raw.githubusercontent.com/ITLab1024/picgo-images/main/202204221711395.png","link":"/","description":"æ¢¦æƒ³è¶Šæ˜¯ç¾ä¸½ï¼Œå°±è¶Šæ˜¯æ˜¾å¾—é¥ä¸å¯åŠï¼Œå¯å¥‡æ€ªçš„æ˜¯ï¼Œä¸€æ—¦ä½ ä¸‹å®šäº†å†³å¿ƒï¼Œå¾ˆå¿«åœ°ï¼Œé‚£äº›æ¢¦æƒ³å°±ä¸€ä¸€æˆä¸ºäº†ç°å®ï¼","socials":{"github":"https://github.com/ITLab1024","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/xpp1109","csdn":"","juejin":"","customs":{"wxgzh":{"icon":"fa fa-wechat","link":"https://raw.githubusercontent.com/ITLab1024/picgo-images/main/202204231828426.jpg"}}}},"mapped":true,"prev_post":{"title":"ubuntu-multipass","uid":"ba590f4c595f20e0726c162dbce4dd2d","slug":"ubuntu-multipass","date":"2022-04-24T08:42:43.000Z","updated":"2022-06-02T08:46:03.037Z","comments":true,"path":"api/articles/ubuntu-multipass.json","keywords":null,"cover":"https://raw.githubusercontent.com/ITLab1024/picgo-images/main/202204241645651.png","text":"ä»€ä¹ˆæ˜¯Maultipassï¼Ÿ å®˜æ–¹è¯´æ˜ï¼š Ubuntu VMs on demand for any workstation Get an instant Ubuntu VM with a single command. Multipass can launch and run v...","link":"","photos":[],"count_time":{"symbolsCount":"2.7k","symbolsTime":"2 mins."},"categories":[{"name":"ubuntu","slug":"ubuntu","count":1,"path":"api/categories/ubuntu.json"},{"name":"multipass","slug":"ubuntu/multipass","count":1,"path":"api/categories/ubuntu/multipass.json"},{"name":"è™šæ‹Ÿæœº","slug":"ubuntu/multipass/è™šæ‹Ÿæœº","count":1,"path":"api/categories/ubuntu/multipass/è™šæ‹Ÿæœº.json"}],"tags":[{"name":"multipass","slug":"multipass","count":1,"path":"api/tags/multipass.json"},{"name":"ubuntu","slug":"ubuntu","count":1,"path":"api/tags/ubuntu.json"}],"author":{"name":"ITLab","slug":"blog-author","avatar":"https://raw.githubusercontent.com/ITLab1024/picgo-images/main/202204221711395.png","link":"/","description":"æ¢¦æƒ³è¶Šæ˜¯ç¾ä¸½ï¼Œå°±è¶Šæ˜¯æ˜¾å¾—é¥ä¸å¯åŠï¼Œå¯å¥‡æ€ªçš„æ˜¯ï¼Œä¸€æ—¦ä½ ä¸‹å®šäº†å†³å¿ƒï¼Œå¾ˆå¿«åœ°ï¼Œé‚£äº›æ¢¦æƒ³å°±ä¸€ä¸€æˆä¸ºäº†ç°å®ï¼","socials":{"github":"https://github.com/ITLab1024","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/xpp1109","csdn":"","juejin":"","customs":{"wxgzh":{"icon":"fa fa-wechat","link":"https://raw.githubusercontent.com/ITLab1024/picgo-images/main/202204231828426.jpg"}}}},"feature":true},"next_post":{"title":"kubernetes-é»‘é©¬ç¨‹åºå‘˜","uid":"c6e4902349bc052e9c4272ae807ca5e6","slug":"kubernetes-é»‘é©¬ç¨‹åºå‘˜","date":"2022-04-23T13:10:13.000Z","updated":"2022-06-02T08:46:03.037Z","comments":true,"path":"api/articles/kubernetes-é»‘é©¬ç¨‹åºå‘˜.json","keywords":null,"cover":"https://raw.githubusercontent.com/ITLab1024/picgo-images/main/202204232113278.jpeg","text":"Kubernetes 1. Kubernetesä»‹ç»1.1 åº”ç”¨éƒ¨ç½²æ–¹å¼æ¼”å˜åœ¨éƒ¨ç½²åº”ç”¨ç¨‹åºçš„æ–¹å¼ä¸Šï¼Œä¸»è¦ç»å†äº†ä¸‰ä¸ªæ—¶ä»£ï¼š ä¼ ç»Ÿéƒ¨ç½²ï¼šäº’è”ç½‘æ—©æœŸï¼Œä¼šç›´æ¥å°†åº”ç”¨ç¨‹åºéƒ¨ç½²åœ¨ç‰©ç†æœºä¸Š ä¼˜ç‚¹ï¼šç®€å•ï¼Œä¸éœ€è¦å…¶å®ƒæŠ€æœ¯çš„å‚ä¸ ç¼ºç‚¹ï¼šä¸èƒ½ä¸ºåº”ç”¨ç¨‹åºå®šä¹‰èµ„æºä½¿ç”¨è¾¹ç•Œï¼Œå¾ˆéš¾åˆç†åœ°åˆ†é…è®¡ç®—èµ„æºï¼Œè€Œä¸”ç¨‹åº...","link":"","photos":[],"count_time":{"symbolsCount":"166k","symbolsTime":"2:31"},"categories":[{"name":"Kubernetes","slug":"Kubernetes","count":2,"path":"api/categories/Kubernetes.json"}],"tags":[{"name":"kubernetes","slug":"kubernetes","count":1,"path":"api/tags/kubernetes.json"}],"author":{"name":"ITLab","slug":"blog-author","avatar":"https://raw.githubusercontent.com/ITLab1024/picgo-images/main/202204221711395.png","link":"/","description":"æ¢¦æƒ³è¶Šæ˜¯ç¾ä¸½ï¼Œå°±è¶Šæ˜¯æ˜¾å¾—é¥ä¸å¯åŠï¼Œå¯å¥‡æ€ªçš„æ˜¯ï¼Œä¸€æ—¦ä½ ä¸‹å®šäº†å†³å¿ƒï¼Œå¾ˆå¿«åœ°ï¼Œé‚£äº›æ¢¦æƒ³å°±ä¸€ä¸€æˆä¸ºäº†ç°å®ï¼","socials":{"github":"https://github.com/ITLab1024","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/xpp1109","csdn":"","juejin":"","customs":{"wxgzh":{"icon":"fa fa-wechat","link":"https://raw.githubusercontent.com/ITLab1024/picgo-images/main/202204231828426.jpg"}}}},"feature":false}}