{"title":"Zookeeper集群搭建（3.8.0）","uid":"84d66273b8c632d9f270cda34aaa6364","slug":"Zookeeper集群搭建（3-8-0）","date":"2022-04-23T13:01:21.000Z","updated":"2022-06-02T08:46:03.035Z","comments":true,"path":"api/articles/Zookeeper集群搭建（3-8-0）.json","keywords":null,"cover":"https://raw.githubusercontent.com/ITLab1024/picgo-images/main/202204232104060.jpeg","content":"<h1 id=\"Zookeeper集群搭建（3-8-0）\"><a href=\"#Zookeeper集群搭建（3-8-0）\" class=\"headerlink\" title=\"Zookeeper集群搭建（3.8.0）\"></a>Zookeeper集群搭建（3.8.0）</h1><p>使用vagrant创建三台虚拟机</p>\n<p>#新建Vagrantfile</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">Vagrant.configure(&quot;2&quot;) do |config|\n\t(1..3).each do |i|\n\t\tconfig.vm.define &quot;node#&#123;i&#125;&quot; do |node|\n\t\t  node.vm.box &#x3D; &quot;centos&#x2F;7&quot;\n\t\t  node.vm.hostname &#x3D; &quot;node#&#123;i&#125;&quot;\n\t\t  node.vm.provider :virtualbox do |v|\n\t\t\tv.memory &#x3D; 1024\n\t\t\tv.cpus &#x3D; 1\n\t\t  end\n\t\t  node.vm.network :private_network, ip: &quot;192.168.56.10#&#123;i&#125;&quot;\n\t\tend\n\tend\nend</code></pre>\n\n\n\n<p>执行</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">vagrant up</code></pre>\n\n<p>可以看到virtualbox上已经创建出来三个虚拟机（vagrant默认使用virtualbox）。</p>\n<p><img src=\"https://raw.githubusercontent.com/xpp1109/images/main/202203301051444.png\" alt=\"三台zookeeper虚拟机\"></p>\n<p>通过vagrant创建的三台机器如下图：</p>\n<table>\n<thead>\n<tr>\n<th>机器名称</th>\n<th>IP地址</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>node1</td>\n<td>192.168.56.101</td>\n</tr>\n<tr>\n<td>node2</td>\n<td>192.168.56.102</td>\n</tr>\n<tr>\n<td>node3</td>\n<td>192.168.56.103</td>\n</tr>\n</tbody></table>\n<p>使用如下指令分别ssh连接服务器</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">vagrant ssh node1\nvagrant ssh node2\nvagrant ssh node3</code></pre>\n\n\n\n<p>安装一些工具类、zookeeper并解压</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">sudo yum install wget -y\nwget https:&#x2F;&#x2F;dlcdn.apache.org&#x2F;zookeeper&#x2F;zookeeper-3.8.0&#x2F;apache-zookeeper-3.8.0-bin.tar.gz --no-check-certificate\ntar zxvf apache-zookeeper-3.8.0-bin.tar.gz &amp;&amp; mv apache-zookeeper-3.8.0-bin zookeeper</code></pre>\n\n<p>三个机器上结构都类似如下：</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">[vagrant@node2 ~]$ pwd\n&#x2F;home&#x2F;vagrant\n[vagrant@node2 ~]$ ls\napache-zookeeper-3.8.0-bin.tar.gz  zookeeper\n[vagrant@node2 ~]$</code></pre>\n\n<h2 id=\"配置说明\"><a href=\"#配置说明\" class=\"headerlink\" title=\"配置说明\"></a>配置说明</h2><p>zookeepeer的集群配置主要关注三点。</p>\n<p>1、server.x配置</p>\n<pre><code>默认情况下，conf目录下只有一个 zoo_sample.cfg文件，需要拷贝一份为 zoo.cfg\n</code></pre>\n<p>2、修改zoo.cfg</p>\n<pre class=\"line-numbers language-properties\" data-language=\"properties\"><code class=\"language-properties\">#这是数据目录，默认是&#x2F;tmp&#x2F;zookeeper，这是不允许的，&#x2F;tmp是临时目录，需要修改为自己的路径，我这里修改为自己的&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;data,默认没有data目录，需要手动创建。\ndataDir&#x3D;&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;data\n#因为是有三个节点，server.x的x是zoo服务器的标志，需要于myid的内容对应，接下来会说myid。顺序排列就可以了，等号后面的内容格式是A:B:C  A代表的是服务器的地址， 可以是hostname，也可以是ip地址，使用hostname需要修改每个服务器的&#x2F;etc&#x2F;hosts文件，使用ip则不用， 我使用的是ip地址。不管使用hostname还是ip都要保证服务器之前可以通信。B代表选举Leader的端口，默认2888， C代表集群内机器通讯使用（Leader监听此端口）默认3888，不用修改，如果你在一个电脑上模拟伪集群，则需要修改，否则端口冲突。\nserver.1&#x3D;192.168.56.101:2888:3888\nserver.2&#x3D;192.168.56.102:2888:3888\nserver.3&#x3D;192.168.56.103:2888:3888</code></pre>\n\n<p>三台机器修改完毕后的zoo.cfg文件内容都是</p>\n<pre class=\"line-numbers language-properties\" data-language=\"properties\"><code class=\"language-properties\">[vagrant@node1 conf]$ cat zoo.cfg\n# The number of milliseconds of each tick\ntickTime&#x3D;2000\n# The number of ticks that the initial\n# synchronization phase can take\ninitLimit&#x3D;10\n# The number of ticks that can pass between\n# sending a request and getting an acknowledgement\nsyncLimit&#x3D;5\n# the directory where the snapshot is stored.\n# do not use &#x2F;tmp for storage, &#x2F;tmp here is just\n# example sakes.\n#dataDir&#x3D;&#x2F;tmp&#x2F;zookeeper\n# the port at which the clients will connect\nclientPort&#x3D;2181\n# the maximum number of client connections.\n# increase this if you need to handle more clients\n#maxClientCnxns&#x3D;60\n#\n# Be sure to read the maintenance section of the\n# administrator guide before turning on autopurge.\n#\n# https:&#x2F;&#x2F;zookeeper.apache.org&#x2F;doc&#x2F;current&#x2F;zookeeperAdmin.html#sc_maintenance\n#\n# The number of snapshots to retain in dataDir\n#autopurge.snapRetainCount&#x3D;3\n# Purge task interval in hours\n# Set to &quot;0&quot; to disable auto purge feature\n#autopurge.purgeInterval&#x3D;1\n\n## Metrics Providers\n#\n# https:&#x2F;&#x2F;prometheus.io Metrics Exporter\n#metricsProvider.className&#x3D;org.apache.zookeeper.metrics.prometheus.PrometheusMetricsProvider\n#metricsProvider.httpHost&#x3D;0.0.0.0\n#metricsProvider.httpPort&#x3D;7000\n#metricsProvider.exportJvmInfo&#x3D;true\n#这是数据目录，默认是&#x2F;tmp&#x2F;zookeeper，这是不允许的，&#x2F;tmp是临时目录，需要修改为自己的路径，我这里修改为自己的&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;data,默认没有data目录，需要手动创建。\ndataDir&#x3D;&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;data\n#因为是有三个节点，所以顺序排列就可以了，node1和node2和node3是我的host名字，此处也可以使用每个服务器的ip地址，使用hostname需要修改每个服务器的&#x2F;etc&#x2F;hosts文件，使用ip则不用。不管使用hostname还是ip都要保证服务器之前可以通信。2888和3888是zookeeper内部通信接口，不用修改，如果你在一个电脑上模拟伪集群，则需要修改，否则端口冲突。\nserver.1&#x3D;192.168.56.101:2888:3888\nserver.2&#x3D;192.168.56.102:2888:3888\nserver.3&#x3D;192.168.56.103:2888:3888</code></pre>\n\n\n\n<p>3、需要在每个机器的dataDir目录下创建myid文件。里面的内容对应的就是server.x的x，比如node1的myid内容是1，node2的myid内容是2，node3的myid内容是3</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">#在node1虚拟机的&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;data目录上执行\n[vagrant@node1 data]$ pwd\n&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;data\n[vagrant@node1 data]$ echo &quot;1&quot; &gt; myid\n#在node2虚拟机的&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;data目录上执行\n[vagrant@node2 data]$ pwd\n&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;data\n[vagrant@node2 data]$ echo &quot;2&quot; &gt; myid\n#在node3虚拟机的&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;data目录上执行\n[vagrant@node3 data]$ pwd\n&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;data\n[vagrant@node3 data]$ echo &quot;3&quot; &gt; myid</code></pre>\n\n<p>4、zookeeper需要jdk的支持</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">sudo yum install java-1.8.0-openjdk -y</code></pre>\n\n\n\n<h2 id=\"启动\"><a href=\"#启动\" class=\"headerlink\" title=\"启动\"></a>启动</h2><p>分别在node1、node2、node3上进入zookeeper目录后，启动</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">bin&#x2F;zkServer.sh status</code></pre>\n\n<p>这里需要注意，第一台启动的时候，可能提示如下信息，不用管</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">[vagrant@node1 zookeeper]$ bin&#x2F;zkServer.sh status\n&#x2F;usr&#x2F;bin&#x2F;java\nZooKeeper JMX enabled by default\nUsing config: &#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;conf&#x2F;zoo.cfg\nClient port found: 2181. Client address: localhost. Client SSL: false.\nError contacting service. It is probably not running.</code></pre>\n\n<p>这是因为要跟其他两个服务器通信，但是其他两台的zookeeper还未启动，忽略。</p>\n<p>三台服务器启动完毕后，查看状态。</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">#node1服务器\n[vagrant@node1 zookeeper]$ bin&#x2F;zkServer.sh status\n&#x2F;usr&#x2F;bin&#x2F;java\nZooKeeper JMX enabled by default\nUsing config: &#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;conf&#x2F;zoo.cfg\nClient port found: 2181. Client address: localhost. Client SSL: false.\nMode: follower\n#node2服务器\n[vagrant@node2 zookeeper]$ bin&#x2F;zkServer.sh status\n&#x2F;usr&#x2F;bin&#x2F;java\nZooKeeper JMX enabled by default\nUsing config: &#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;conf&#x2F;zoo.cfg\nClient port found: 2181. Client address: localhost. Client SSL: false.\nMode: leader\n#node3服务器\n[vagrant@node3 zookeeper]$ bin&#x2F;zkServer.sh status\n&#x2F;usr&#x2F;bin&#x2F;java\nZooKeeper JMX enabled by default\nUsing config: &#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;conf&#x2F;zoo.cfg\nClient port found: 2181. Client address: localhost. Client SSL: false.\nMode: follower</code></pre>\n\n<h2 id=\"测试\"><a href=\"#测试\" class=\"headerlink\" title=\"测试\"></a>测试</h2><p>使用zkCli.sh 连接leader(node1服务器)，创建一个叫做test的node。</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">[vagrant@node2 zookeeper]$ bin&#x2F;zkCli.sh\n&#x2F;usr&#x2F;bin&#x2F;java\nConnecting to localhost:2181\n2022-03-30 04:18:52,326 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version&#x3D;3.8.0-5a02a05eddb59aee6ac762f7ea82e92a68eb9c0f, built on 2022-02-25 08:49 UTC\n2022-03-30 04:18:52,327 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name&#x3D;node2\n2022-03-30 04:18:52,328 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version&#x3D;1.8.0_322\n2022-03-30 04:18:52,328 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor&#x3D;Red Hat, Inc.\n2022-03-30 04:18:52,328 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home&#x3D;&#x2F;usr&#x2F;lib&#x2F;jvm&#x2F;java-1.8.0-openjdk-1.8.0.322.b06-1.el7_9.x86_64&#x2F;jre\n2022-03-30 04:18:52,328 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path&#x3D;&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;zookeeper-server&#x2F;target&#x2F;classes:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;build&#x2F;classes:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;zookeeper-server&#x2F;target&#x2F;lib&#x2F;*.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;build&#x2F;lib&#x2F;*.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;zookeeper-prometheus-metrics-3.8.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;zookeeper-jute-3.8.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;zookeeper-3.8.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;snappy-java-1.1.7.7.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;slf4j-api-1.7.30.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;simpleclient_servlet-0.9.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;simpleclient_hotspot-0.9.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;simpleclient_common-0.9.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;simpleclient-0.9.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-transport-native-unix-common-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-transport-native-epoll-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-transport-classes-epoll-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-transport-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-tcnative-classes-2.0.48.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-tcnative-2.0.48.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-resolver-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-handler-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-common-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-codec-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-buffer-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;metrics-core-4.1.12.1.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;logback-core-1.2.10.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;logback-classic-1.2.10.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jline-2.14.6.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jetty-util-ajax-9.4.43.v20210629.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jetty-util-9.4.43.v20210629.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jetty-servlet-9.4.43.v20210629.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jetty-server-9.4.43.v20210629.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jetty-security-9.4.43.v20210629.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jetty-io-9.4.43.v20210629.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jetty-http-9.4.43.v20210629.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;javax.servlet-api-3.1.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jackson-databind-2.13.1.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jackson-core-2.13.1.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jackson-annotations-2.13.1.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;commons-io-2.11.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;commons-cli-1.4.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;audience-annotations-0.12.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;zookeeper-*.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;zookeeper-server&#x2F;src&#x2F;main&#x2F;resources&#x2F;lib&#x2F;*.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;conf:\n2022-03-30 04:18:52,328 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path&#x3D;&#x2F;usr&#x2F;java&#x2F;packages&#x2F;lib&#x2F;amd64:&#x2F;usr&#x2F;lib64:&#x2F;lib64:&#x2F;lib:&#x2F;usr&#x2F;lib\n2022-03-30 04:18:52,328 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir&#x3D;&#x2F;tmp\n2022-03-30 04:18:52,353 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler&#x3D;&lt;NA&gt;\n2022-03-30 04:18:52,353 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name&#x3D;Linux\n2022-03-30 04:18:52,353 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch&#x3D;amd64\n2022-03-30 04:18:52,353 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version&#x3D;3.10.0-1127.el7.x86_64\n2022-03-30 04:18:52,353 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name&#x3D;vagrant\n2022-03-30 04:18:52,354 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home&#x3D;&#x2F;home&#x2F;vagrant\n2022-03-30 04:18:52,354 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir&#x3D;&#x2F;home&#x2F;vagrant&#x2F;zookeeper\n2022-03-30 04:18:52,354 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free&#x3D;10MB\n2022-03-30 04:18:52,354 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max&#x3D;247MB\n2022-03-30 04:18:52,354 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total&#x3D;15MB\n2022-03-30 04:18:52,357 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString&#x3D;localhost:2181 sessionTimeout&#x3D;30000 watcher&#x3D;org.apache.zookeeper.ZooKeeperMain$MyWatcher@7c16905e\n2022-03-30 04:18:52,361 [myid:] - INFO  [main:o.a.z.c.X509Util@77] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation&#x3D;true to disable client-initiated TLS renegotiation\n2022-03-30 04:18:52,365 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2022-03-30 04:18:52,376 [myid:] - INFO  [main:o.a.z.ClientCnxn@1732] - zookeeper.request.timeout value is 0. feature enabled&#x3D;false\n2022-03-30 04:18:52,380 [myid:localhost:2181] - INFO  [main-SendThread(localhost:2181):o.a.z.ClientCnxn$SendThread@1171] - Opening socket connection to server localhost&#x2F;0:0:0:0:0:0:0:1:2181.\n2022-03-30 04:18:52,381 [myid:localhost:2181] - INFO  [main-SendThread(localhost:2181):o.a.z.ClientCnxn$SendThread@1173] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2022-03-30 04:18:52,385 [myid:localhost:2181] - INFO  [main-SendThread(localhost:2181):o.a.z.ClientCnxn$SendThread@1005] - Socket connection established, initiating session, client: &#x2F;0:0:0:0:0:0:0:1:37554, server: localhost&#x2F;0:0:0:0:0:0:0:1:2181\nWelcome to ZooKeeper!\n2022-03-30 04:18:52,403 [myid:localhost:2181] - INFO  [main-SendThread(localhost:2181):o.a.z.ClientCnxn$SendThread@1444] - Session establishment complete on server localhost&#x2F;0:0:0:0:0:0:0:1:2181, session id &#x3D; 0x20000309d020003, negotiated timeout &#x3D; 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nJLine support is enabled\n[zk: localhost:2181(CONNECTED) 0] create &#x2F;test\nCreated &#x2F;test\n[zk: localhost:2181(CONNECTED) 1]</code></pre>\n\n<p>查看其他服务器是否有test这个node。</p>\n<p>node2服务器</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">[vagrant@node1 zookeeper]$ bin&#x2F;zkCli.sh\n&#x2F;usr&#x2F;bin&#x2F;java\nConnecting to localhost:2181\n2022-03-30 04:22:55,364 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version&#x3D;3.8.0-5a02a05eddb59aee6ac762f7ea82e92a68eb9c0f, built on 2022-02-25 08:49 UTC\n2022-03-30 04:22:55,366 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name&#x3D;node1\n2022-03-30 04:22:55,366 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version&#x3D;1.8.0_322\n2022-03-30 04:22:55,367 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor&#x3D;Red Hat, Inc.\n2022-03-30 04:22:55,367 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home&#x3D;&#x2F;usr&#x2F;lib&#x2F;jvm&#x2F;java-1.8.0-openjdk-1.8.0.322.b06-1.el7_9.x86_64&#x2F;jre\n2022-03-30 04:22:55,367 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path&#x3D;&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;zookeeper-server&#x2F;target&#x2F;classes:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;build&#x2F;classes:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;zookeeper-server&#x2F;target&#x2F;lib&#x2F;*.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;build&#x2F;lib&#x2F;*.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;zookeeper-prometheus-metrics-3.8.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;zookeeper-jute-3.8.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;zookeeper-3.8.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;snappy-java-1.1.7.7.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;slf4j-api-1.7.30.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;simpleclient_servlet-0.9.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;simpleclient_hotspot-0.9.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;simpleclient_common-0.9.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;simpleclient-0.9.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-transport-native-unix-common-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-transport-native-epoll-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-transport-classes-epoll-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-transport-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-tcnative-classes-2.0.48.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-tcnative-2.0.48.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-resolver-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-handler-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-common-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-codec-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-buffer-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;metrics-core-4.1.12.1.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;logback-core-1.2.10.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;logback-classic-1.2.10.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jline-2.14.6.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jetty-util-ajax-9.4.43.v20210629.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jetty-util-9.4.43.v20210629.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jetty-servlet-9.4.43.v20210629.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jetty-server-9.4.43.v20210629.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jetty-security-9.4.43.v20210629.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jetty-io-9.4.43.v20210629.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jetty-http-9.4.43.v20210629.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;javax.servlet-api-3.1.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jackson-databind-2.13.1.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jackson-core-2.13.1.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jackson-annotations-2.13.1.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;commons-io-2.11.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;commons-cli-1.4.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;audience-annotations-0.12.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;zookeeper-*.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;zookeeper-server&#x2F;src&#x2F;main&#x2F;resources&#x2F;lib&#x2F;*.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;conf:.:&#x2F;usr&#x2F;lib&#x2F;jvm&#x2F;java-1.8.0-openjdk-1.8.0.322.b06-1.el7_9.x86_64&#x2F;lib&#x2F;dt.jar:&#x2F;usr&#x2F;lib&#x2F;jvm&#x2F;java-1.8.0-openjdk-1.8.0.322.b06-1.el7_9.x86_64&#x2F;lib&#x2F;tools.jar\n2022-03-30 04:22:55,367 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path&#x3D;&#x2F;usr&#x2F;java&#x2F;packages&#x2F;lib&#x2F;amd64:&#x2F;usr&#x2F;lib64:&#x2F;lib64:&#x2F;lib:&#x2F;usr&#x2F;lib\n2022-03-30 04:22:55,367 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir&#x3D;&#x2F;tmp\n2022-03-30 04:22:55,367 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler&#x3D;&lt;NA&gt;\n2022-03-30 04:22:55,367 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name&#x3D;Linux\n2022-03-30 04:22:55,367 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch&#x3D;amd64\n2022-03-30 04:22:55,367 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version&#x3D;3.10.0-1127.el7.x86_64\n2022-03-30 04:22:55,367 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name&#x3D;vagrant\n2022-03-30 04:22:55,367 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home&#x3D;&#x2F;home&#x2F;vagrant\n2022-03-30 04:22:55,367 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir&#x3D;&#x2F;home&#x2F;vagrant&#x2F;zookeeper\n2022-03-30 04:22:55,367 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free&#x3D;10MB\n2022-03-30 04:22:55,367 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max&#x3D;247MB\n2022-03-30 04:22:55,368 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total&#x3D;15MB\n2022-03-30 04:22:55,370 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString&#x3D;localhost:2181 sessionTimeout&#x3D;30000 watcher&#x3D;org.apache.zookeeper.ZooKeeperMain$MyWatcher@7c16905e\n2022-03-30 04:22:55,374 [myid:] - INFO  [main:o.a.z.c.X509Util@77] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation&#x3D;true to disable client-initiated TLS renegotiation\n2022-03-30 04:22:55,378 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2022-03-30 04:22:55,386 [myid:] - INFO  [main:o.a.z.ClientCnxn@1732] - zookeeper.request.timeout value is 0. feature enabled&#x3D;false\n2022-03-30 04:22:55,397 [myid:localhost:2181] - INFO  [main-SendThread(localhost:2181):o.a.z.ClientCnxn$SendThread@1171] - Opening socket connection to server localhost&#x2F;127.0.0.1:2181.\n2022-03-30 04:22:55,397 [myid:localhost:2181] - INFO  [main-SendThread(localhost:2181):o.a.z.ClientCnxn$SendThread@1173] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2022-03-30 04:22:55,402 [myid:localhost:2181] - INFO  [main-SendThread(localhost:2181):o.a.z.ClientCnxn$SendThread@1005] - Socket connection established, initiating session, client: &#x2F;127.0.0.1:52908, server: localhost&#x2F;127.0.0.1:2181\nWelcome to ZooKeeper!\nJLine support is enabled\n2022-03-30 04:22:55,471 [myid:localhost:2181] - INFO  [main-SendThread(localhost:2181):o.a.z.ClientCnxn$SendThread@1444] - Session establishment complete on server localhost&#x2F;127.0.0.1:2181, session id &#x3D; 0x1000031544f0000, negotiated timeout &#x3D; 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\n[zk: localhost:2181(CONNECTED) 0] ls &#x2F;\n[test, zookeeper]\n[zk: localhost:2181(CONNECTED) 1]\n</code></pre>\n\n\n\n<p>node3服务器</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">[vagrant@node3 zookeeper]$ bin&#x2F;zkCli.sh\n&#x2F;usr&#x2F;bin&#x2F;java\nConnecting to localhost:2181\n2022-03-30 04:20:15,221 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version&#x3D;3.8.0-5a02a05eddb59aee6ac762f7ea82e92a68eb9c0f, built on 2022-02-25 08:49 UTC\n2022-03-30 04:20:15,223 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name&#x3D;node3\n2022-03-30 04:20:15,223 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version&#x3D;1.8.0_322\n2022-03-30 04:20:15,223 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor&#x3D;Red Hat, Inc.\n2022-03-30 04:20:15,223 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home&#x3D;&#x2F;usr&#x2F;lib&#x2F;jvm&#x2F;java-1.8.0-openjdk-1.8.0.322.b06-1.el7_9.x86_64&#x2F;jre\n2022-03-30 04:20:15,223 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path&#x3D;&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;zookeeper-server&#x2F;target&#x2F;classes:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;build&#x2F;classes:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;zookeeper-server&#x2F;target&#x2F;lib&#x2F;*.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;build&#x2F;lib&#x2F;*.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;zookeeper-prometheus-metrics-3.8.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;zookeeper-jute-3.8.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;zookeeper-3.8.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;snappy-java-1.1.7.7.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;slf4j-api-1.7.30.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;simpleclient_servlet-0.9.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;simpleclient_hotspot-0.9.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;simpleclient_common-0.9.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;simpleclient-0.9.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-transport-native-unix-common-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-transport-native-epoll-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-transport-classes-epoll-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-transport-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-tcnative-classes-2.0.48.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-tcnative-2.0.48.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-resolver-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-handler-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-common-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-codec-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;netty-buffer-4.1.73.Final.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;metrics-core-4.1.12.1.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;logback-core-1.2.10.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;logback-classic-1.2.10.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jline-2.14.6.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jetty-util-ajax-9.4.43.v20210629.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jetty-util-9.4.43.v20210629.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jetty-servlet-9.4.43.v20210629.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jetty-server-9.4.43.v20210629.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jetty-security-9.4.43.v20210629.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jetty-io-9.4.43.v20210629.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jetty-http-9.4.43.v20210629.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;javax.servlet-api-3.1.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jackson-databind-2.13.1.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jackson-core-2.13.1.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;jackson-annotations-2.13.1.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;commons-io-2.11.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;commons-cli-1.4.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;lib&#x2F;audience-annotations-0.12.0.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;zookeeper-*.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;zookeeper-server&#x2F;src&#x2F;main&#x2F;resources&#x2F;lib&#x2F;*.jar:&#x2F;home&#x2F;vagrant&#x2F;zookeeper&#x2F;bin&#x2F;..&#x2F;conf:\n2022-03-30 04:20:15,223 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path&#x3D;&#x2F;usr&#x2F;java&#x2F;packages&#x2F;lib&#x2F;amd64:&#x2F;usr&#x2F;lib64:&#x2F;lib64:&#x2F;lib:&#x2F;usr&#x2F;lib\n2022-03-30 04:20:15,223 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir&#x3D;&#x2F;tmp\n2022-03-30 04:20:15,224 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler&#x3D;&lt;NA&gt;\n2022-03-30 04:20:15,224 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name&#x3D;Linux\n2022-03-30 04:20:15,224 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch&#x3D;amd64\n2022-03-30 04:20:15,224 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version&#x3D;3.10.0-1127.el7.x86_64\n2022-03-30 04:20:15,224 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name&#x3D;vagrant\n2022-03-30 04:20:15,224 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home&#x3D;&#x2F;home&#x2F;vagrant\n2022-03-30 04:20:15,224 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir&#x3D;&#x2F;home&#x2F;vagrant&#x2F;zookeeper\n2022-03-30 04:20:15,224 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free&#x3D;10MB\n2022-03-30 04:20:15,224 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max&#x3D;247MB\n2022-03-30 04:20:15,224 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total&#x3D;15MB\n2022-03-30 04:20:15,227 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString&#x3D;localhost:2181 sessionTimeout&#x3D;30000 watcher&#x3D;org.apache.zookeeper.ZooKeeperMain$MyWatcher@7c16905e\n2022-03-30 04:20:15,231 [myid:] - INFO  [main:o.a.z.c.X509Util@77] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation&#x3D;true to disable client-initiated TLS renegotiation\n2022-03-30 04:20:15,235 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2022-03-30 04:20:15,249 [myid:] - INFO  [main:o.a.z.ClientCnxn@1732] - zookeeper.request.timeout value is 0. feature enabled&#x3D;false\n2022-03-30 04:20:15,254 [myid:localhost:2181] - INFO  [main-SendThread(localhost:2181):o.a.z.ClientCnxn$SendThread@1171] - Opening socket connection to server localhost&#x2F;0:0:0:0:0:0:0:1:2181.\n2022-03-30 04:20:15,255 [myid:localhost:2181] - INFO  [main-SendThread(localhost:2181):o.a.z.ClientCnxn$SendThread@1173] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2022-03-30 04:20:15,259 [myid:localhost:2181] - INFO  [main-SendThread(localhost:2181):o.a.z.ClientCnxn$SendThread@1005] - Socket connection established, initiating session, client: &#x2F;0:0:0:0:0:0:0:1:37874, server: localhost&#x2F;0:0:0:0:0:0:0:1:2181\nWelcome to ZooKeeper!\nJLine support is enabled\n2022-03-30 04:20:15,338 [myid:localhost:2181] - INFO  [main-SendThread(localhost:2181):o.a.z.ClientCnxn$SendThread@1444] - Session establishment complete on server localhost&#x2F;0:0:0:0:0:0:0:1:2181, session id &#x3D; 0x300003148b90000, negotiated timeout &#x3D; 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\n[zk: localhost:2181(CONNECTED) 0] ls &#x2F;\n[test, zookeeper]\n[zk: localhost:2181(CONNECTED) 1]</code></pre>\n\n<p>可以看到node2和node3服务器上的zookeeper也有&#x2F;test这个node。说明集群没问题。</p>\n<h2 id=\"WEBUI浏览\"><a href=\"#WEBUI浏览\" class=\"headerlink\" title=\"WEBUI浏览\"></a>WEBUI浏览</h2><p>使用docker部署webUI</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">docker run -d -p *080:8080 -e ZK_DEFAULT_NODE&#x3D;192.168.56.102:2181&#x2F; -e USER&#x3D;zkweb -e PASSWORD&#x3D;zkweb --name zk-web -t tobilg&#x2F;zookeeper-webui</code></pre>\n\n<p>访问</p>\n<p><img src=\"https://raw.githubusercontent.com/xpp1109/images/main/202203301231935.png\" alt=\"通过zkweb访问zookeeper\"></p>\n<p><img src=\"https://raw.githubusercontent.com/xpp1109/images/main/202203301231435.png\" alt=\"主界面\"></p>\n","feature":false,"text":"Zookeeper集群搭建（3.8.0）使用vagrant创建三台虚拟机 #新建Vagrantfile Vagrant.configure(&quot;2&quot;) do |config| (1..3).each do |i| config.vm.define &quot;n...","link":"","photos":[],"count_time":{"symbolsCount":"33k","symbolsTime":"30 mins."},"categories":[{"name":"Zookeeper","slug":"Zookeeper","count":1,"path":"api/categories/Zookeeper.json"}],"tags":[{"name":"Zookeeper cluster","slug":"Zookeeper-cluster","count":1,"path":"api/tags/Zookeeper-cluster.json"},{"name":"3.8.0","slug":"3-8-0","count":1,"path":"api/tags/3-8-0.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Zookeeper%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA%EF%BC%883-8-0%EF%BC%89\"><span class=\"toc-text\">Zookeeper集群搭建（3.8.0）</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E\"><span class=\"toc-text\">配置说明</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%90%AF%E5%8A%A8\"><span class=\"toc-text\">启动</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%B5%8B%E8%AF%95\"><span class=\"toc-text\">测试</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#WEBUI%E6%B5%8F%E8%A7%88\"><span class=\"toc-text\">WEBUI浏览</span></a></li></ol></li></ol>","author":{"name":"ITLab","slug":"blog-author","avatar":"https://raw.githubusercontent.com/ITLab1024/picgo-images/main/202204221711395.png","link":"/","description":"梦想越是美丽，就越是显得遥不可及，可奇怪的是，一旦你下定了决心，很快地，那些梦想就一一成为了现实！","socials":{"github":"https://github.com/ITLab1024","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/xpp1109","csdn":"","juejin":"","customs":{"wxgzh":{"icon":"fa fa-wechat","link":"https://raw.githubusercontent.com/ITLab1024/picgo-images/main/202204231828426.jpg"}}}},"mapped":true,"prev_post":{"title":"kubernetes-黑马程序员","uid":"c6e4902349bc052e9c4272ae807ca5e6","slug":"kubernetes-黑马程序员","date":"2022-04-23T13:10:13.000Z","updated":"2022-06-02T08:46:03.037Z","comments":true,"path":"api/articles/kubernetes-黑马程序员.json","keywords":null,"cover":"https://raw.githubusercontent.com/ITLab1024/picgo-images/main/202204232113278.jpeg","text":"Kubernetes 1. Kubernetes介绍1.1 应用部署方式演变在部署应用程序的方式上，主要经历了三个时代： 传统部署：互联网早期，会直接将应用程序部署在物理机上 优点：简单，不需要其它技术的参与 缺点：不能为应用程序定义资源使用边界，很难合理地分配计算资源，而且程序...","link":"","photos":[],"count_time":{"symbolsCount":"166k","symbolsTime":"2:31"},"categories":[{"name":"Kubernetes","slug":"Kubernetes","count":2,"path":"api/categories/Kubernetes.json"}],"tags":[{"name":"kubernetes","slug":"kubernetes","count":1,"path":"api/tags/kubernetes.json"}],"author":{"name":"ITLab","slug":"blog-author","avatar":"https://raw.githubusercontent.com/ITLab1024/picgo-images/main/202204221711395.png","link":"/","description":"梦想越是美丽，就越是显得遥不可及，可奇怪的是，一旦你下定了决心，很快地，那些梦想就一一成为了现实！","socials":{"github":"https://github.com/ITLab1024","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/xpp1109","csdn":"","juejin":"","customs":{"wxgzh":{"icon":"fa fa-wechat","link":"https://raw.githubusercontent.com/ITLab1024/picgo-images/main/202204231828426.jpg"}}}},"feature":false},"next_post":{}}